<!DOCTYPE html>
<head>
    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Error handling | gpconnect</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="Error handling" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="GP Connect aims to support better clinical care by opening up information and data held within GP Practice IT systems for use across health and social care. The GP Connect vision will be achieved by standardising integration and simplifying the operating model." />
<meta property="og:description" content="GP Connect aims to support better clinical care by opening up information and data held within GP Practice IT systems for use across health and social care. The GP Connect vision will be achieved by standardising integration and simplifying the operating model." />
<link rel="canonical" href="http://localhost:4005/development_fhir_error_handling_guidance.html" />
<meta property="og:url" content="http://localhost:4005/development_fhir_error_handling_guidance.html" />
<meta property="og:site_name" content="gpconnect" />
<script type="application/ld+json">
{"description":"GP Connect aims to support better clinical care by opening up information and data held within GP Practice IT systems for use across health and social care. The GP Connect vision will be achieved by standardising integration and simplifying the operating model.","@type":"WebPage","url":"http://localhost:4005/development_fhir_error_handling_guidance.html","headline":"Error handling","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Details of the common error handling pattern(s) across the GP Connect API">
<meta name="keywords" content="fhirdevelopmenterror,  fhir, development, operation outcome, error">
<title>Error handling | GP Connect</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>
<script src="js/image-map.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="icon" type="image/png"  href="images/favicon.png">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="gpconnect" href="http://localhost:4005/feed.xml">




    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
	

	<link rel="stylesheet" href="css/default.min.css">
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
    <script>
        $(document).ready(function(){
		hljs.initHighlightingOnLoad();
		});
    </script>

	
    

	
</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> GP Connect API - FHIR&reg; APIs for GP IT systems</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                

                <!-- GitHub icon -->
                <a href="https://github.com/nhsconnect/gpconnect" target="_blank" class="fa fa-github fa-lg navbar-brand no_icon" aria-hidden="true">&nbsp;</a>

                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Error handling">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          























<ul id="mysidebar" class="nav">
    <img src="images/logo.png" alt="NHS Digital Logo" height="110" width="110" />
    <li class="sidebarTitle">GP Connect Documents API 1.0.0-beta<br/><span style="font-size: smaller;">FHIR&reg; STU3</span></li>
	<li class="sidebarSection"></li>

    

    
    
    
    <li>
        <a href="#">Overview</a>
        <ul>
            
            
            
            <li><a href="index.html">Introduction</a></li>
            
            
            
            
            
            
            <li><a href="overview_engage.html">Getting started</a></li>
            
            
            
            
            
            
            <li><a href="overview_priority_capabilities.html">Capabilities</a></li>
            
            
            
            <li class="subfolders">
                <a href="#">Release notes</a>
                <ul>
                    
                    
                    
                    <li><a href="overview_release_notes_0_1_0.html">0.1.0</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Design approach</a>
        <ul>
            
            
            
            <li><a href="designprinciples_open_api_principles.html">API design principles</a></li>
            
            
            
            
            
            
            <li><a href="designprinciples_development_principles.html">Development principles</a></li>
            
            
            
            
            
            
            <li><a href="designprinciples_data_model_principles.html">Data model principles</a></li>
            
            
            
            
            
            
            <li><a href="designprinciples_ig_principles.html">Information governance principles</a></li>
            
            
            
            
            
            
            <li><a href="designprinciples_clinical_safety_principles.html">Clinical safety principles</a></li>
            
            
            
            
            
            
            <li><a href="designprinciples_assurance_principles.html">Assurance principles</a></li>
            
            
            
            
            
            
            <li><a href="design_clinical_terminologies.html">Clinical terminologies</a></li>
            
            
            
            
            
            
            <li><a href="design_product_versioning.html">Specification versioning</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Explore</a>
        <ul>
            
            
            
            <li><a href="system_demonstrator.html">System demonstrator</a></li>
            
            
            
            
            
            
            <li><a href="system_swagger.html">Interactive API documentation</a></li>
            
            
            
            
            
            
            <li><a href="system_reference_postman.html">Postman API examples</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Development</a>
        <ul>
            
            
            
            <li><a href="development_deliverables.html">Development deliverables</a></li>
            
            
            
            
            
            
            <li><a href="development_fhir_open_source_guidance.html">FHIR&reg; library</a></li>
            
            
            
            
            
            
            <li><a href="development_fhir_api_guidance.html">FHIR&reg; implementation</a></li>
            
            
            
            
            
            
            <li><a href="development_general_api_guidance.html">General API guidance</a></li>
            
            
            
            
            
            
            <li><a href="development_branch_surgeries.html">Branch surgeries</a></li>
            
            
            
            
            
            
            <li><a href="development_fhir_resource_guidance.html">FHIR&reg; resources</a></li>
            
            
            
            
            
            
            <li><a href="development_api_security_guidance.html">Security</a></li>
            
            
            
            
            
            
            <li class="active"><a href="development_fhir_error_handling_guidance.html">Error handling</a></li>
            
            
            
            
            
            
            <li><a href="development_api_volume_and_performance.html">Volumetric and performance</a></li>
            
            
            
            
            
            
            <li><a href="development_api_non_functional_requirements.html">Non-functional requirements</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Implement a capability</a>
        <ul>
            
            
            
            <li><a href="foundations.html">Foundations</a></li>
            
            
            
            
            
            
            <li><a href="appointments.html"><b class="capability-not-available">Appointment Management</b></a></li>
            
            
            
            
            
            
            <li><a href="accessrecord_structured.html"><b class="capability-not-available">Access Record Structured</b></a></li>
            
            
            
            
            
            
            <li><a href="accessrecord_documents_development.html">Access Record Documents</a></li>
            
            
            
            
            
            
            <li><a href="accessrecord.html"><b class="capability-not-available">Access Record HTML</b></a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Integrate with Spine</a>
        <ul>
            
            
            
            <li><a href="integration_illustrated.html">Spine integration illustrated</a></li>
            
            
            
            
            
            
            <li><a href="integration_system_topologies.html">System topologies</a></li>
            
            
            
            
            
            
            <li><a href="integration_cross_organisation_audit_and_provenance.html">Cross-organisation audit and provenance</a></li>
            
            
            
            
            
            
            <li><a href="integration_personal_demographic_service.html">Personal Demographic Service</a></li>
            
            
            
            <li class="subfolders">
                <a href="#">Spine Directory Services</a>
                <ul>
                    
                    
                    
                    <li><a href="integration_spine_directory_service.html">Overview and querying</a></li>
                    
                    
                    
                    
                    
                    <li><a href="integration_sds_registering_endpoints.html">Registering systems</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            
            
            
            <li><a href="integration_interaction_ids.html">Interaction IDs</a></li>
            
            
            
            
            
            
            <li><a href="integration_spine_secure_proxy.html">Spine Secure Proxy</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Test and assure</a>
        <ul>
            
            
            
            <li><a href="testing_deliverables.html">Testing assets</a></li>
            
            
            
            
            
            
            <li><a href="testing_environments.html">Test environments</a></li>
            
            
            
            
            
            
            <li><a href="testing_api_provider_testing.html">Provider testing</a></li>
            
            
            
            
            
            
            <li><a href="testing_api_consumer_testing.html">Consumer testing</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Help and support</a>
        <ul>
            
            
            
            <li><a href="support_faq.html">Frequently asked questions</a></li>
            
            
            
            
            
            
            <li><a href="overview_glossary.html">Glossary</a></li>
            
            
            
            
            
            
            <li><a href="support_communications.html">Communication channels</a></li>
            
            
            
            <li class="subfolders">
                <a href="#">External links</a>
                <ul>
                    
                    
                    
                    <li><a href="https://github.com/nhsconnect/gpconnect" target="_blank">GPC Documentation repository</a></li>
                    
                    
                    
                    
                    
                    <li><a href="https://digital.nhs.uk/services/gp-connect" target="_blank">GPC NHS Digital</a></li>
                    
                    
                    
                    
                    
                    <li><a href="https://github.com/nhsconnect/gpconnect-fhir/" target="_blank">GPC GitHub FHIR data library</a></li>
                    
                    
                    
                    
                    
                    <li><a href="https://github.com/nhsconnect/gpconnect-dotnet-examples/" target="_blank">GPC GitHub C# examples</a></li>
                    
                    
                    
                    
                    
                    <li><a href="https://github.com/nhsconnect/gpconnect-java-examples/" target="_blank">GPC GitHub Java examples</a></li>
                    
                    
                    
                    
                    
                    <li><a href="https://github.com/nhsconnect/gpconnect-provider-testing/" target="_blank">GPC GitHub provider test harness</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            <li class="subfolders">
                <a href="#">Tags</a>
                <ul>
                    
                    
                    
                    <li><a href="tag_getting_started.html">Getting started</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_first_of_type.html">First of Type</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_fhir.html">FHIR&reg;</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_structured.html">Structured</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_foundations.html">Foundations</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_htmlgetcarerecord.html">HTML Get Care Record</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_getcarerecord.html">Get Care Record</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_appointments.html">Appointments</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_engagement.html">Engagement</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_design.html">Design</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_development.html">Development</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_integration.html">Integration</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_testing.html">Testing</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_assurance.html">Assurance</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_deployment.html">Deployment</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_support.html">Support</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_clinical_safety.html">Clinical safety</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_information_governance.html">Information governance</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_commissioning.html">Commissioning</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_code_snippet.html">Code snippet</a></li>
                    
                    
                    
                    
                    
                    <li><a href="tag_usecase.html">Use case</a></li>
                    
                    
                    
                </ul>
            </li>
            
            
            
            
            
            
            <li><a href="support_run_website_locally.html">Run website locally</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
         




 <div markdown="span" class="alert alert-danger" role="alert">
	<i class="fa fa-exclamation-circle"></i>
	<b>Version:</b> This is a <b>pre-release (draft) version</b> of the GP Connect API specification and is subject to change. For the current version and other specifications, please visit <a href="https://developer.nhs.uk/gp-connect-specification-versions/">GP Connect specifications page</a>.
</div>

 

<div class="post-header">
   <h1 class="post-title-main">Error handling</h1>
</div>





<div class="post-content">

   
    <div class="summary">Details of the common error handling pattern(s) across the GP Connect API</div>
   

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    

  <p>As a nationally brokered FHIR® API, the GP Connect error handling approach defined below closely follows the approach of the Spine Core FHIR API Framework.</p>

<p>However, the guidance given below is the definitive error handling definition for the GP Connect API and thus the <a href="https://developer.nhs.uk/apis/spine-core-1-0/resources_error_handling.html">Spine Core error handling guidance</a> should be viewed for context only.</p>

<h3 id="operation-outcome-usage">Operation outcome usage</h3>

<p>In the event of an error, provider systems <strong>SHALL</strong> respond by providing an OperationOutcome resource profiled to <a href="https://fhir.nhs.uk/STU3/StructureDefinition/GPConnect-OperationOutcome-1">GPConnect-OperationOutcome-1</a>.</p>

<p>The <code class="highlighter-rouge">GPConnect-OperationOutcome-1</code>:</p>
<ul>
  <li><strong>SHALL</strong> contain a definition of severity in the <code class="highlighter-rouge">OperationOutcome.issue.severity</code> field providing a value from the <a href="http://hl7.org/fhir/STU3/valueset-issue-severity.html">valueset-issue-severity</a> value set. In all cases described in this guidance, the value used will be <code class="highlighter-rouge">error</code>.</li>
  <li><strong>SHALL</strong> contain a definition of the type of error in the <code class="highlighter-rouge">OperationOutcome.issue.code</code> element, providing a value from the <a href="http://hl7.org/fhir/STU3/valueset-issue-type.html">issue-type</a> value set.</li>
  <li><strong>SHALL</strong> contain details of the <code class="highlighter-rouge">Spine error code</code> in the <code class="highlighter-rouge">OperationOutcome.issue.details.coding.code</code> and <code class="highlighter-rouge">OperationOutcome.issue.details.coding.display</code> fields. These shall be taken from the standard set of NHS Spine error codes as defined in the <a href="https://fhir.nhs.uk/STU3/ValueSet/Spine-ErrorOrWarningCode-1">spine-error-or-warning-code-1</a> value set. The Spine error and warning codes provide a greater degree of error handling granularity, and also ensure a standardised error handling approach across NHS APIs.</li>
  <li><strong>SHOULD</strong> provide additional diagnostic details of the error in the <code class="highlighter-rouge">OperationOutcome.diagnostics</code> property where such details securely provide additional error context for consumer applications.</li>
</ul>

<p>The sections below provide guidance on the error details to be returned in a number of key scenarios.</p>

<h3 id="identity-validation-errors">Identity validation errors</h3>

<p>Provider systems <strong>SHALL</strong> respond by returning one of the following <code class="highlighter-rouge">OperationOutcome</code> error codes where FHIR resource identity error scenarios are encountered:</p>

<table>
  <thead>
    <tr>
      <th>HTTP code</th>
      <th>Issue type</th>
      <th>Spine error code - code</th>
      <th>Spine error code - display</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">400</code></td>
      <td>value</td>
      <td>INVALID_IDENTIFIER_SYSTEM</td>
      <td>Invalid identifier system</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">400</code></td>
      <td>value</td>
      <td>INVALID_IDENTIFIER_VALUE</td>
      <td>Invalid identifier value</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">400</code></td>
      <td>value</td>
      <td>INVALID_NHS_NUMBER</td>
      <td>NHS number invalid</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">400</code></td>
      <td>business-rule</td>
      <td>INVALID_PATIENT_DEMOGRAPHICS</td>
      <td>Invalid patient demographics (that is, PDS trace failed)</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">404</code></td>
      <td>not-found</td>
      <td>ORGANISATION_NOT_FOUND</td>
      <td>Organisation record not found</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">404</code></td>
      <td>not-found</td>
      <td>PATIENT_NOT_FOUND</td>
      <td>Patient record not found</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">404</code></td>
      <td>not-found</td>
      <td>PRACTITIONER_NOT_FOUND</td>
      <td>Practitioner record not found</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">404</code></td>
      <td>not-found</td>
      <td>NO_RECORD_FOUND</td>
      <td>No record found</td>
    </tr>
  </tbody>
</table>

<h4 id="example-invalid-nhs-number-supplied">Example: Invalid NHS number supplied</h4>

<p>If an invalid NHS number value is supplied to the <code class="highlighter-rouge">$gpc.getcarerecord</code> operation, the following error details would be returned:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
	</span><span class="s2">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OperationOutcome"</span><span class="p">,</span><span class="w">
	</span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
		</span><span class="s2">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"https://fhir.nhs.uk/STU3/StructureDefinition/GPConnect-OperationOutcome-1"</span><span class="p">]</span><span class="w">
	</span><span class="p">},</span><span class="w">
	</span><span class="s2">"issue"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
		</span><span class="s2">"severity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
			</span><span class="s2">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
				</span><span class="s2">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://fhir.nhs.uk/STU3/ValueSet/Spine-ErrorOrWarningCode-1"</span><span class="p">,</span><span class="w">
				</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVALID_NHS_NUMBER"</span><span class="p">,</span><span class="w">
				</span><span class="s2">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid NHS number"</span><span class="w">
			</span><span class="p">}]</span><span class="w">
		</span><span class="p">}</span><span class="w">
	</span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h4 id="example-patient-not-found">Example: Patient not found</h4>

<p>For example, if a valid NHS number value is supplied to the <code class="highlighter-rouge">$gpc.getcarerecord</code> operation but no GP record exists for that patient, then the following error details would be returned:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
	</span><span class="s2">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OperationOutcome"</span><span class="p">,</span><span class="w">
	</span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
		</span><span class="s2">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"https://fhir.nhs.uk/STU3/StructureDefinition/GPConnect-OperationOutcome-1"</span><span class="p">]</span><span class="w">
	</span><span class="p">},</span><span class="w">
	</span><span class="s2">"issue"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
		</span><span class="s2">"severity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"not-found"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
			</span><span class="s2">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
				</span><span class="s2">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://fhir.nhs.uk/STU3/ValueSet/Spine-ErrorOrWarningCode-1"</span><span class="p">,</span><span class="w">
				</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PATIENT_NOT_FOUND"</span><span class="p">,</span><span class="w">
				</span><span class="s2">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient not found"</span><span class="w">
			</span><span class="p">}]</span><span class="w">
		</span><span class="p">}</span><span class="w">
	</span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h4 id="example-resource-not-found">Example: Resource not found</h4>

<p>This is a catch-all where a request for a resource instance cannot be found at the FHIR server, where more specific Spine error codes (such as PATIENT_NOT_FOUND) cannot be used.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
	</span><span class="s2">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OperationOutcome"</span><span class="p">,</span><span class="w">
	</span><span class="s2">"issue"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
		</span><span class="s2">"severity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"not-found"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
			</span><span class="s2">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
				</span><span class="s2">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://fhir.nhs.uk/STU3/ValueSet/Spine-ErrorOrWarningCode-1"</span><span class="p">,</span><span class="w">
				</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NO_RECORD_FOUND"</span><span class="p">,</span><span class="w">
				</span><span class="s2">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"No record found"</span><span class="w">
			</span><span class="p">}]</span><span class="w">
		</span><span class="p">}</span><span class="w">
	</span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="security-validation-errors">Security validation errors</h3>

<p>When responding to consumer API requests, provider systems <strong>SHALL</strong> return one of the following <code class="highlighter-rouge">OperationOutcome</code> details when enforcement of local consent rules result in an error condition:</p>

<table>
  <thead>
    <tr>
      <th>HTTP code</th>
      <th>Issue type</th>
      <th>Spine error code - code</th>
      <th>Spine error code - display</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">403</code></td>
      <td>forbidden</td>
      <td>NO_PATIENT_CONSENT</td>
      <td>Patient has not provided consent to share data</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">403</code></td>
      <td>forbidden</td>
      <td>NO_ORGANISATION_CONSENT</td>
      <td>Organisation has not provided consent to share data</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">403</code></td>
      <td>forbidden</td>
      <td>ACCESS_DENIED</td>
      <td>Access denied</td>
    </tr>
  </tbody>
</table>

<h4 id="example-no-patient-consent-to-share">Example: No patient consent to share</h4>

<p>For example, if the patient has requested that their record should not be shared then the following error details would be returned:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
	</span><span class="s2">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OperationOutcome"</span><span class="p">,</span><span class="w">
	</span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
		</span><span class="s2">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"https://fhir.nhs.uk/STU3/StructureDefinition/GPConnect-OperationOutcome-1"</span><span class="p">]</span><span class="w">
	</span><span class="p">},</span><span class="w">
	</span><span class="s2">"issue"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
		</span><span class="s2">"severity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"forbidden"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
			</span><span class="s2">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
				</span><span class="s2">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://fhir.nhs.uk/STU3/ValueSet/Spine-ErrorOrWarningCode-1"</span><span class="p">,</span><span class="w">
				</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NO_PATIENT_CONSENT"</span><span class="p">,</span><span class="w">
				</span><span class="s2">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patient has not provided consent to share data"</span><span class="w"> 
			</span><span class="p">}]</span><span class="w">
		</span><span class="p">}</span><span class="w">
	</span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="duplicate-errors">Duplicate errors</h3>

<p>When responding to consumer API requests, provider systems <strong>SHALL</strong> return one of the following <code class="highlighter-rouge">OperationOutcome</code> details when a resource could not be created or updated because it would cause a duplicate in the provider system:</p>

<table>
  <thead>
    <tr>
      <th>HTTP code</th>
      <th>Issue type</th>
      <th>Spine error code - code</th>
      <th>Spine error code - display</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">409</code></td>
      <td>duplicate</td>
      <td>DUPLICATE_REJECTED</td>
      <td>Create would lead to creation of a duplicate resource</td>
    </tr>
  </tbody>
</table>

<h4 id="example-attempting-to-register-a-patient-that-already-exists">Example: Attempting to register a patient that already exists</h4>

<p>For example, if the consumer attempted to register a patient that already has an active record on the provider system the error details would be returned:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
	</span><span class="s2">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OperationOutcome"</span><span class="p">,</span><span class="w">
	</span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
		</span><span class="s2">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"https://fhir.nhs.uk/STU3/StructureDefinition/GPConnect-OperationOutcome-1"</span><span class="p">]</span><span class="w">
	</span><span class="p">},</span><span class="w">
	</span><span class="s2">"issue"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
		</span><span class="s2">"severity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"duplicate"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
			</span><span class="s2">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
				</span><span class="s2">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://fhir.nhs.uk/STU3/ValueSet/Spine-ErrorOrWarningCode-1"</span><span class="p">,</span><span class="w">
				</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DUPLICATE_REJECTED"</span><span class="p">,</span><span class="w">
				</span><span class="s2">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Create would lead to creation of duplicate resource"</span><span class="w"> 
			</span><span class="p">}]</span><span class="w">
		</span><span class="p">}</span><span class="w">
	</span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="resource-validation-errors">Resource validation errors</h3>

<p>Where FHIR resource validation issues arise during processing of consumer requests, provider systems <strong>SHALL</strong> utilise one the following error details:</p>

<table>
  <thead>
    <tr>
      <th>HTTP code</th>
      <th>Issue type</th>
      <th>Spine error code - code</th>
      <th>Spine error code - display</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">422</code></td>
      <td>invalid</td>
      <td>INVALID_RESOURCE</td>
      <td>Submitted resource is not valid.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">422</code></td>
      <td>invalid</td>
      <td>INVALID_PARAMETER</td>
      <td>Submitted parameter is not valid.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">422</code></td>
      <td>invalid</td>
      <td>REFERENCE_NOT_FOUND</td>
      <td>Referenced resource not found.</td>
    </tr>
  </tbody>
</table>

<p>Detailed diagnostic information <strong>MUST</strong> be supplied when erroring on the codes above.</p>

<p>INVALID_PARAMETER would be used in the following, or similar, scenarios:</p>
<ul>
  <li>Unexpected parameter value for a custom operation. For example, a lowercase value is supplied to the recordSection parameter of the $gpc.getcarerecord operation.</li>
  <li>An invalid date/time value specified in a custom operation parameter. For example, an invalid timePeriod defined in the timePeriod input parameter to the $gpc.getcarerecord operation.</li>
</ul>

<p>INVALID_RESOURCE would be used in situations such as the following:</p>
<ul>
  <li>Resource fails to validate against StructureDefinition (either in request body or in JSON Web Tokens (JWT) claim).</li>
  <li>A resource fails to be processed because of a FHIR constraint, or other rule application, where the error is not already covered by other error codes</li>
</ul>

<p>REFERENCE_NOT_FOUND describes a scenario where a consumer POSTs a FHIR resource which contains a FHIR reference that cannot be found.</p>

<h4 id="example-reference-not-found">Example: Reference not found</h4>

<p>For example, when using the ‘Book an appointment’ API use case, a consumer includes a reference to a slot which does not exist at the server. The following error details would be returned:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
	</span><span class="s2">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OperationOutcome"</span><span class="p">,</span><span class="w">
	</span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
		</span><span class="s2">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"https://fhir.nhs.uk/STU3/StructureDefinition/GPConnect-OperationOutcome-1"</span><span class="p">]</span><span class="w">
	</span><span class="p">},</span><span class="w">
	</span><span class="s2">"issue"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
		</span><span class="s2">"severity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invalid"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
			</span><span class="s2">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
				</span><span class="s2">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://fhir.nhs.uk/STU3/ValueSet/Spine-ErrorOrWarningCode-1"</span><span class="p">,</span><span class="w">
				</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REFERENCE_NOT_FOUND"</span><span class="p">,</span><span class="w">
				</span><span class="s2">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FHIR reference not found"</span><span class="w">
			</span><span class="p">}]</span><span class="w">
		</span><span class="p">},</span><span class="w">
	    </span><span class="s2">"diagnostics"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Reference to Slot/6 - no such slot exists at the server"</span><span class="w">
		</span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/f:Slot/f:6"</span><span class="w">
	</span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="malformed-request-errors">Malformed request errors</h3>

<p>When the server cannot or will not process a request due to an apparent client error then the following <code class="highlighter-rouge">BAD_REQUEST</code> error <strong>SHALL</strong> be used to return debug details.</p>

<table>
  <thead>
    <tr>
      <th>HTTP code</th>
      <th>Issue type</th>
      <th>Spine error code - code</th>
      <th>Spine error code - display</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">400</code></td>
      <td>invalid</td>
      <td>BAD_REQUEST</td>
      <td>Submitted request is malformed/invalid.</td>
    </tr>
  </tbody>
</table>

<p>BAD_REQUEST Spine error codes should be used in the following types of scenario:</p>
<ul>
  <li>JWT claims information is not valid JSON, is null, or has an invalid value</li>
  <li>invalid FHIR resource in JWT claim (for example, patient resource when practitioner expected)</li>
  <li>malformed JSON or XML content in request body</li>
  <li>an expected header (for example, <code class="highlighter-rouge">interaction ID header</code>) is missing or invalid</li>
  <li>invalid HTTP verb used (for example, using POST to read a patient)</li>
  <li>InteractionID header does not match request</li>
</ul>

<h4 id="example-malformed-json-claim-in-request">Example: Malformed JSON claim in request</h4>

<p>For example, if the request contained a null <code class="highlighter-rouge">aud</code> claim in the JWT, then the following error details would be returned:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w"> </span><span class="p">{</span><span class="w">
	</span><span class="s2">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OperationOutcome"</span><span class="p">,</span><span class="w">
	</span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
		</span><span class="s2">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"https://fhir.nhs.uk/STU3/StructureDefinition/GPConnect-OperationOutcome-1"</span><span class="p">]</span><span class="w">
	</span><span class="p">},</span><span class="w">
	</span><span class="s2">"issue"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
		</span><span class="s2">"severity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invalid"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
			</span><span class="s2">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
				</span><span class="s2">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://fhir.nhs.uk/STU3/ValueSet/Spine-ErrorOrWarningCode-1"</span><span class="p">,</span><span class="w">
				</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BAD_REQUEST"</span><span class="p">,</span><span class="w">
				</span><span class="s2">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bad request"</span><span class="w">
			</span><span class="p">}]</span><span class="w">
		</span><span class="p">},</span><span class="w">
		</span><span class="s2">"diagnostics"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Empty JWT aud claim"</span><span class="w">
	</span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="internal-server-errors">Internal server errors</h3>

<p>When the FHIR server has received a request for an operation or FHIR resource which is not (yet) implemented, then the NOT_IMPLEMENTED Spine error code <strong>SHALL</strong> be used.</p>

<table>
  <thead>
    <tr>
      <th>HTTP code</th>
      <th>Issue type</th>
      <th>Spine error code - code</th>
      <th>Spine error code - display</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">501</code></td>
      <td>not-supported</td>
      <td>NOT_IMPLEMENTED</td>
      <td>FHIR resource or operation not implemented at server</td>
    </tr>
  </tbody>
</table>

<p>When the error is <strong>unexpected</strong> and the server can’t be more specific on the exact nature of the problem then the <code class="highlighter-rouge">INTERNAL_SERVER_ERROR</code> Spine error code <strong>SHALL</strong> be used, and diagnostics <strong>SHALL</strong> be included to provide detail of the error.</p>

<table>
  <thead>
    <tr>
      <th>HTTP code</th>
      <th>Issue type</th>
      <th>Spine error code - code</th>
      <th>Spine error code - display</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">500</code></td>
      <td>processing</td>
      <td>INTERNAL_SERVER_ERROR</td>
      <td>Unexpected internal server error.</td>
    </tr>
  </tbody>
</table>

<h4 id="example-unexpected-exception">Example: Unexpected exception</h4>

<p>For example, if an unexpected internal exception is thrown by either an Operation or RESTful API, then the following error details would be returned:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w"> </span><span class="p">{</span><span class="w">
	</span><span class="s2">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OperationOutcome"</span><span class="p">,</span><span class="w">
	</span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
		</span><span class="s2">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"https://fhir.nhs.uk/STU3/StructureDefinition/GPConnect-OperationOutcome-1"</span><span class="p">]</span><span class="w">
	</span><span class="p">},</span><span class="w">
	</span><span class="s2">"issue"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
		</span><span class="s2">"severity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"exception"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
			</span><span class="s2">"coding"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
				</span><span class="s2">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://fhir.nhs.uk/STU3/ValueSet/Spine-ErrorOrWarningCode-1"</span><span class="p">,</span><span class="w">
				</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INTERNAL_SERVER_ERROR"</span><span class="p">,</span><span class="w">
				</span><span class="s2">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Internal server error"</span><span class="w">
			</span><span class="p">}]</span><span class="w">
		</span><span class="p">},</span><span class="w">
		</span><span class="s2">"diagnostics"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Any further internal debug details i.e. stack trace details etc."</span><span class="w">
	</span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="spine-secure-proxy-ssp-errors">Spine Secure Proxy (SSP) errors</h3>

<p>When the Spine Secure Proxy cannot or will not process a request then one of the following errors <strong>SHALL</strong> be used to return debug details:</p>

<table>
  <thead>
    <tr>
      <th>HTTP code</th>
      <th>Issue type</th>
      <th>Description of error</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">403</code></td>
      <td>forbidden</td>
      <td>The sender or receiver’s ASID is not authorised for this interaction.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">405</code></td>
      <td>not-supported</td>
      <td>Bad request for an unsupported HTTP verb such as TRACE.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">415</code></td>
      <td>not-supported</td>
      <td>A consumer application asked for an unsupported media type.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">502</code></td>
      <td>transient</td>
      <td>A downstream server is offline.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">504</code></td>
      <td>transient</td>
      <td>A downstream server timed out.</td>
    </tr>
  </tbody>
</table>

<h4 id="ssp-error-example-asid-check-failed">SSP error example: ASID check failed</h4>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
	</span><span class="s2">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OperationOutcome"</span><span class="p">,</span><span class="w">
	</span><span class="s2">"issue"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
		</span><span class="s2">"severity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"forbidden"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"diagnostics"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Any further internal debug details i.e. stack trace details etc."</span><span class="w">
	</span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h4 id="ssp-error-example-method-not-allowed">SSP error example: method not allowed</h4>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
	</span><span class="s2">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OperationOutcome"</span><span class="p">,</span><span class="w">
	</span><span class="s2">"issue"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
		</span><span class="s2">"severity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"not-supported"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"diagnostics"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Any further internal debug details i.e. stack trace details etc."</span><span class="w">
	</span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h4 id="ssp-error-example-unsupported-media-type">SSP error example: unsupported media type</h4>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
	</span><span class="s2">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OperationOutcome"</span><span class="p">,</span><span class="w">
	</span><span class="s2">"issue"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
		</span><span class="s2">"severity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"not-supported"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"diagnostics"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Any further internal debug details i.e. stack trace details etc."</span><span class="w">
	</span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h4 id="ssp-error-example-bad-gateway">SSP error example: bad gateway</h4>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
	</span><span class="s2">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OperationOutcome"</span><span class="p">,</span><span class="w">
	</span><span class="s2">"issue"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
		</span><span class="s2">"severity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transient"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"diagnostics"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Any further internal debug details i.e. stack trace details etc."</span><span class="w">
	</span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h4 id="ssp-error-example-gateway-timeout">SSP error example: gateway timeout</h4>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
	</span><span class="s2">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OperationOutcome"</span><span class="p">,</span><span class="w">
	</span><span class="s2">"issue"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
		</span><span class="s2">"severity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"error"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transient"</span><span class="p">,</span><span class="w">
		</span><span class="s2">"diagnostics"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Any further internal debug details i.e. stack trace details etc."</span><span class="w">
	</span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>


    <div class="tags">
        
        <b>Tags: </b>
        
        
        
        <a href="tag_fhir.html" class="btn btn-default navbar-btn cursorNorm" role="button">fhir</a>
        
        
        
        <a href="tag_development.html" class="btn btn-default navbar-btn cursorNorm" role="button">development</a>
        
        
        
        
        
    </div>

    

</div>


<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
                    <img class="pull-left" src="images/explanatoryline.png" alt="NHS Digital Explanatory Line"/>
                    <br/>
                    &copy;2019 NHS Digital<br />
                     Site last generated: Sep 23, 2019 <br />
                    <br/>
                    <br/>
                    <!-- OGL Licence -->
                    <div class="open-government-licence">
                        <a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/" rel="license" class="no_icon"><img src="images/licence/ogl-symbol-41px-retina-black.png"></img></a>
                        <p>All content is available under the <a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/" rel="license" class="no_icon">Open Government Licence v3.0</a>, except where otherwise stated</p>
                    </div>
                    <div style="font-size: larger;"><a href="accessibility.html">Accessibility</a> | <a href="https://help.github.com/articles/github-privacy-statement/">Privacy</a> | <a href="support_communications.html">Contact us</a></div>
                </div>
            </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

</html>
